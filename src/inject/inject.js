// Generated by CoffeeScript 1.6.3
var $domflags, domArray, domString, domTag, flagElements, key,
  __hasProp = {}.hasOwnProperty;

console.log("inject.js");

$domflags = $('[domflag]');

flagElements = [];

for (key in $domflags) {
  if (!__hasProp.call($domflags, key)) continue;
  if ($.isNumeric(key)) {
    domTag = $domflags[key].tagName;
    domArray = [domTag];
    Array.prototype.slice.call($domflags[key].attributes).forEach(function(item) {
      if (item.name !== "domflag") {
        return domArray.push("" + item.name + "='" + item.value + "'");
      }
    });
    domString = domArray.join(' ');
    flagElements.push(domString);
  }
}

chrome.runtime.sendMessage({
  flags: flagElements
});

chrome.runtime.onMessage.addListener(function(message, sender, sendResponse) {
  return sendResponse({
    flags: flagElements
  });
});
